(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[20],{FkFv:function(e,t,a){e.exports={bigImg:"antd-pro\\pages\\-content-manager\\-big-img-bigImg",hint:"antd-pro\\pages\\-content-manager\\-big-img-hint"}},skM3:function(e,t,a){"use strict";var l=a("TqRt"),r=a("284h");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("IzEo");var n=l(a("bx4M"));a("g9YV");var u=l(a("wCAj"));a("/zsF");var d=l(a("PArb"));a("P2fV");var i=l(a("NJEC"));a("BoS7");var s=l(a("Sdc0"));a("14J3");var f=l(a("BMrR"));a("DZo9");var m=l(a("8z0m")),o=l(a("pVnL"));a("+L6B");var c=l(a("2/Rp"));a("Pwec");var h=l(a("CtXQ"));a("5NDa");var g=l(a("5rEg"));a("jCWc");var p=l(a("kPKH"));a("5Dmo");var v=l(a("3S7+")),E=l(a("MVZn"));a("miYZ");var y=l(a("tsqr")),k=l(a("lSNA")),b=l(a("lwsE")),S=l(a("W8MJ")),F=l(a("a1gu")),I=l(a("Nsbk")),w=l(a("7W2i"));a("y8nQ");var C,x,B,L=l(a("Vl3Y")),V=r(a("q1tI")),N=l(a("zHco")),M=a("MuoO"),D=l(a("EfYk")),R=l(a("FkFv")),z=L.default.Item,P=[{uid:"-1",name:"\u9650\u5236\u4e0a\u4f20\u4e00\u5f20\u56fe\u7247",url:"",status:"done"}],U=(C=(0,M.connect)(function(e){var t=e.bigimg,a=e.adminUser;return{data:t.list,currentUser:a.currentUser}}),x=L.default.create(),C(B=x(B=function(e){function t(){var e,a;(0,b.default)(this,t);for(var l=arguments.length,r=new Array(l),n=0;n<l;n++)r[n]=arguments[n];return a=(0,F.default)(this,(e=(0,I.default)(t)).call.apply(e,[this].concat(r))),a.state=(0,k.default)({expandForm:!1,formValues:{},bigImgSrc:"",uploadBigImgSrc:"",fileList:P},"formValues",{}),a.toggleForm=function(){var e=a.state.expandForm;a.setState({expandForm:!e})},a.handleChange=function(e){var t=e.file,l=e.fileList;l=l.slice(-2),"uploading"!==t.status&&console.log(e),"done"===t.status?("ok"===t.response.status&&(l=l.filter(function(e){if(e.name===t.name){var a=e.response.data.url,l=e.uid,r=e.status,n=e.name;return{uid:l,status:r,name:n,url:a}}}),a.setState({uploadBigImgSrc:t.response.data.url,bigImgSrc:t.response.data.url})),y.default.success("\u6587\u4ef6\u4e0a\u4f20\u6210\u529f")):"error"===t.status&&y.default.error("\u6587\u4ef6\u4e0a\u4f20\u5931\u8d25"),a.setState({fileList:l})},a.handleFormReset=function(){var e=a.props.form;e.resetFields(),a.setState({formValues:{},fileList:P})},a.handleSubmit=function(e){e.preventDefault();var t=a.state.uploadBigImgSrc,l=a.props,r=l.dispatch,n=l.form;n.validateFields(function(e,l){if(!e&&""!==t){var n=(0,E.default)({},l,{url:t});a.setState({formValues:n}),console.log(n),r({type:"bigimg/fetchSubmit",payload:n}),a.handleFormReset()}})},a}return(0,w.default)(t,e),(0,S.default)(t,[{key:"componentDidMount",value:function(){var e=this.props.dispatch;e({type:"bigimg/fetch"})}},{key:"renderUploadForm",value:function(){var e=this.state.fileList,t=this.props,a=t.form.getFieldDecorator,l=t.currentUser.name,r={action:"/server/upload/uposs",multiple:!0,onChange:this.handleChange};return V.default.createElement(L.default,{onSubmit:this.handleSubmit,layout:"inline"},V.default.createElement(f.default,{gutter:{md:8,lg:24,xl:48}},V.default.createElement(p.default,{md:8,sm:24},V.default.createElement(z,{label:"\u64cd\u4f5c\u4eba\u540d\u5b57"},a("name",{initialValue:l})(V.default.createElement(v.default,{title:"prompt text"},V.default.createElement("span",null,l))))),V.default.createElement(p.default,{md:8,sm:24},V.default.createElement(z,{label:"\u56fe\u7247\u6807\u9898"},a("title")(V.default.createElement(g.default,{placeholder:"\u8bf7\u8f93\u5165"})))),V.default.createElement(p.default,{md:8,sm:24},V.default.createElement(z,{label:"\u56fe\u7247\u5b9e\u9645\u5bbd\u5ea6"},a("width",{initialValue:"1920"})(V.default.createElement(g.default,{placeholder:"\u8bf7\u8f93\u5165"})))),V.default.createElement(p.default,{md:8,sm:24},V.default.createElement(z,{label:"\u56fe\u7247\u5b9e\u9645\u9ad8\u5ea6"},a("height",{initialValue:"180"})(V.default.createElement(g.default,{placeholder:"\u8bf7\u8f93\u5165"})))),V.default.createElement(p.default,{md:8,sm:24},V.default.createElement(m.default,(0,o.default)({},r,{fileList:e}),V.default.createElement(c.default,null,V.default.createElement(h.default,{type:"upload"})," \u70b9\u51fb\u5148\u4e0a\u4f20"))),V.default.createElement(p.default,{md:8,sm:24},V.default.createElement("span",{className:D.default.submitButtons},V.default.createElement(c.default,{type:"primary",htmlType:"submit"},"\u4e0a\u4f20"),V.default.createElement(c.default,{style:{marginLeft:8},onClick:this.handleFormReset},"\u91cd\u7f6e"),V.default.createElement("a",{style:{marginLeft:8},onClick:this.toggleForm},"\u6536\u8d77 ",V.default.createElement(h.default,{type:"down"}))))))}},{key:"renderShrinkForm",value:function(){return V.default.createElement(f.default,{gutter:{md:8,lg:24,xl:48}},V.default.createElement(p.default,{md:8,sm:24},V.default.createElement("span",{className:D.default.submitButtons},V.default.createElement("a",{style:{marginLeft:8},onClick:this.toggleForm},"\u9700\u8981\u4e0a\u4f20\u56fe\u7247 ",V.default.createElement(h.default,{type:"down"})))))}},{key:"renderForm",value:function(){var e=this.state.expandForm;return e?this.renderUploadForm():this.renderShrinkForm()}},{key:"renderBigImg",value:function(){var e=this.state.bigImgSrc;return V.default.createElement("img",{alt:"",src:e})}},{key:"renderBigFont",value:function(){return V.default.createElement("div",{className:R.default.hint},"\u70b9\u51fb\u67e5\u770b\u56fe\u7247")}},{key:"renderImg",value:function(){var e=this.state.bigImgSrc;return""===e?this.renderBigFont():this.renderBigImg()}},{key:"checkBigImg",value:function(e,t){var a=this.props.data,l="";a.filter(function(e){return e.key===t?l=e.url:""}),this.setState({bigImgSrc:l})}},{key:"remove",value:function(e){var t=this.props.dispatch,a=e;t({type:"bigimg/fetchRemove",payload:{id:a}})}},{key:"handleStatusChange",value:function(e){var t=this.props,a=t.data,l=t.dispatch,r={},n=[];n=a.filter(function(t){if(t.id===e){var a=1===t.status?0:1,l=t.id;return r={id:l,status:a},t.status=a,t}return t.status=1,t}),l({type:"bigimg/changeStatus",payload:{list:n,changeData:r}})}},{key:"render",value:function(){var e=this,t=this.props,a=t.location,l=t.data,r=[{title:"id",dataIndex:"id",key:"id",width:"5%"},{title:"\u65f6\u95f4",dataIndex:"createTime",key:"createTime",width:"10%"},{title:"\u64cd\u4f5c\u4eba\u540d\u5b57",dataIndex:"name",key:"name",width:"10%"},{title:"\u6807\u9898",dataIndex:"title",key:"title",width:"10%"},{title:"\u5bbd*\u9ad8",key:"widthandheight",width:"10%",render:function(e,t){return V.default.createElement("span",null,t.width," * ",t.height)}},{title:"\u8d44\u6e90\u8def\u5f84",dataIndex:"url",key:"url",width:"30%"},{title:"\u72b6\u6001",dataIndex:"status",key:"status",render:function(t,a){return V.default.createElement("span",null,V.default.createElement(s.default,{checkedChildren:"\u663e\u793a",unCheckedChildren:"\u5173\u95ed",checked:0===t,onChange:function(){return e.handleStatusChange(a.key)}}))}},{title:"\u64cd\u4f5c",key:"action",render:function(t,a){return V.default.createElement("span",null,V.default.createElement(i.default,{title:"\u662f\u5426\u5220\u9664\u6b64\u7528\u6237",onConfirm:function(){return e.remove(a.key)}},V.default.createElement("a",null,"\u5220\u9664")),V.default.createElement(d.default,{type:"vertical"}),V.default.createElement("a",{onClick:function(t){return e.checkBigImg(t,a.key)}},"\u67e5\u770b\u56fe\u7247"))}}];return V.default.createElement(N.default,{title:"\u5927\u56fe\u7247",tabActiveKey:a.pathname,content:"\u8be5\u5927\u56fe\u7247\u7528\u4e8e\u524d\u53f0\u5934\u90e8\u5c55\u793a\uff0c\u53ea\u6709\u4e00\u4e2a\u80fd\u663e\u793a\u5176\u4ed6\u5fc5\u987b\u7981\u6b62\uff0c\u89c4\u5b9a\u4e0a\u4f201920*180\u5c3a\u5bf8\u3002"},V.default.createElement(n.default,{bordered:!1},V.default.createElement("div",{className:R.default.bigImg},this.renderImg()),V.default.createElement(d.default,{type:"horizontal"}),V.default.createElement("div",{className:D.default.tableList},V.default.createElement("div",{className:D.default.tableListForm},this.renderForm())),V.default.createElement(d.default,{type:"horizontal"}),V.default.createElement(u.default,{columns:r,dataSource:l})))}}]),t}(V.PureComponent))||B)||B);t.default=U}}]);